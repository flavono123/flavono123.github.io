<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>elasticsearch on flavono123</title><link>https://flavono123.github.io/tags/elasticsearch/</link><description>Recent content in elasticsearch on flavono123</description><generator>Hugo -- gohugo.io</generator><language>ko-kr</language><lastBuildDate>Wed, 30 Mar 2022 08:07:45 +0900</lastBuildDate><atom:link href="https://flavono123.github.io/tags/elasticsearch/index.xml" rel="self" type="application/rss+xml"/><item><title>jq 커스텀 함수 사용(Elasticsearch 프로퍼티 매핑 JSON 만들기)</title><link>https://flavono123.github.io/posts/jq-custom-function/</link><pubDate>Wed, 30 Mar 2022 08:07:45 +0900</pubDate><guid>https://flavono123.github.io/posts/jq-custom-function/</guid><description>Elasticsearch의 인덱스된 문서 필드에 데이터 타입이 동적으로 매핑이 된다. 하지만 인덱스 크기를 제한하기 위해 회사에선 명시적 매핑을 사용하고 있다.
그리고 회사에서 ES는 대부분 로그를 검색하는 용도로 쓰기 위해 사용하고 있다. 즉, ES 문서가 로그이다. 로그는 대부분 JSON이다. 그리고 매핑의 바디 역시 JSON이다. 따라서 내가 만들려는 것은 다음 같은 JSON 입출력의 jq 필터이다:
# 입력 ❯ cat input.json | jq { &amp;#34;a&amp;#34;: 11, &amp;#34;b&amp;#34;: 0.1 } # 출력 ❯ cat output.json | jq { &amp;#34;a&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;integer&amp;#34; }, &amp;#34;b&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;float&amp;#34; } } ES 매핑의 문법을 자세히 모르더라도 이해할 수 있도록 예시 JSON을 구성했다.</description></item><item><title>Elasticsearch를 공부하고 DDIA를 다시 읽어보았다</title><link>https://flavono123.github.io/posts/elasticsearch-and-ddia/</link><pubDate>Fri, 21 Jan 2022 15:43:56 +0900</pubDate><guid>https://flavono123.github.io/posts/elasticsearch-and-ddia/</guid><description>사내에서 Elasticsearch 스터디를 진행 중이다. 특히 키바나(쿼리와 시각화)를 더 잘 쓰고 싶어서 이 주제를 하자고 주장했다. 그런데 우리가 스터디 하는 2~3개월 정도 기간에 가이드가 될만한 책이나 강의가 마땅치 않아, 스터디 진행 구성도 오밀조밀하게 직접했다. 그중 첫단계는 Elastic 가이드 북을 한번 읽는 것인데 이제 막 끝났다.
일단 너무 재밌었다. 내가 알고 싶었던 것은, match 쿼리 결과가 왜 생각하는대로 안나오는지, terms aggregation에 왜 이런 결과가 있는지, 같은 것인데 이를 다 해소할 수 있었다.</description></item></channel></rss>